import{f as T,r as x,w as D,u as L,x as j,y as r,j as t,e as S,D as F,a4 as q,B as M,P as K,a as O,b as I,c as Q,a5 as U,a6 as J,F as V,G as A,H as g,J as m,K as B,L as $,M as H}from"./index-BGb8UYbK.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=T("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);function R(){const[w,f]=x.useState("kanban"),[C,y]=x.useState(!1);document.title="Product Listings | Dashboard";const i=D(),{toast:a}=L(),{data:c,isLoading:d}=j({queryKey:["/api/content","product"],queryFn:async()=>{const e=await fetch("/api/content?contentType=product");if(!e.ok)throw new Error("Failed to fetch product listings");return e.json()}}),{data:l}=j({queryKey:["/api/workflows"],queryFn:async()=>{const e=await fetch("/api/workflows");if(!e.ok)throw new Error("Failed to fetch workflows");return e.json()}}),v=r({mutationFn:async e=>{const s=await fetch("/api/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,contentType:"product"})});if(!s.ok){const n=await s.json();throw new Error(n.message||"Failed to create product listing")}return s.json()},onSuccess:()=>{i.invalidateQueries({queryKey:["/api/content"]}),y(!1),a({title:"Product Listing Created",description:"Your product listing has been created successfully."})},onError:e=>{a({title:"Error",description:e.message,variant:"destructive"})}}),b=r({mutationFn:async({id:e,status:s,notes:n})=>{const o=await fetch(`/api/content/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,notes:n})});if(!o.ok){const P=await o.json();throw new Error(P.message||"Failed to update content")}return o.json()},onSuccess:()=>{i.invalidateQueries({queryKey:["/api/content"]}),a({title:"Content Updated",description:"Product listing status has been updated successfully."})},onError:e=>{a({title:"Error",description:e.message,variant:"destructive"})}}),E=r({mutationFn:async({id:e,data:s})=>{const n=await fetch(`/api/content/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const o=await n.json();throw new Error(o.message||"Failed to edit content")}return n.json()},onSuccess:()=>{i.invalidateQueries({queryKey:["/api/content"]}),a({title:"Product Updated",description:"Product listing has been updated successfully."})},onError:e=>{a({title:"Error",description:e.message,variant:"destructive"})}}),k=r({mutationFn:async e=>{const s=await fetch(`/api/content/${e}`,{method:"DELETE"});if(!s.ok){const n=await s.json();throw new Error(n.message||"Failed to delete content")}return s.json()},onSuccess:()=>{i.invalidateQueries({queryKey:["/api/content"]}),a({title:"Product Deleted",description:"Product listing has been deleted successfully."})},onError:e=>{a({title:"Error",description:e.message,variant:"destructive"})}}),N=e=>{v.mutate(e)},u=(e,s,n)=>{b.mutate({id:e,status:s,notes:n})},p=(e,s)=>{E.mutate({id:e,data:s})},h=e=>{k.mutate(e)};return t.jsx(S,{title:"Product Listings",description:"Manage your product listings and catalog content",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(z,{className:"h-6 w-6 text-black"}),t.jsx("div",{className:"text-sm text-muted-foreground",children:"Manage your product listings and catalog"})]}),t.jsxs(F,{open:C,onOpenChange:y,children:[t.jsx(q,{asChild:!0,children:t.jsxs(M,{children:[t.jsx(K,{className:"mr-2 h-4 w-4"}),"Create Product Listing"]})}),t.jsxs(O,{className:"sm:max-w-[600px]",children:[t.jsxs(I,{children:[t.jsx(Q,{children:"Create New Product Listing"}),t.jsx(U,{children:"Fill in the details to create a new product listing."})]}),t.jsx(J,{onSubmit:N,workflows:l})]})]})]}),t.jsxs(V,{value:w,onValueChange:f,className:"w-full",children:[t.jsxs(A,{className:"grid w-full grid-cols-3",children:[t.jsx(g,{value:"kanban",children:"Kanban Board"}),t.jsx(g,{value:"list",children:"List View"}),t.jsx(g,{value:"calendar",children:"Calendar"})]}),t.jsx(m,{value:"kanban",className:"mt-6",children:d?t.jsx("div",{className:"text-center p-8",children:"Loading product listings..."}):t.jsx(B,{contentItems:c||[],onStatusChange:u,onEdit:p,onDelete:h,workflows:l})}),t.jsx(m,{value:"list",className:"mt-6",children:d?t.jsx("div",{className:"text-center p-8",children:"Loading product listings..."}):t.jsx($,{contentItems:c||[],onStatusChange:u,onEdit:p,onDelete:h,workflows:l})}),t.jsx(m,{value:"calendar",className:"mt-6",children:d?t.jsx("div",{className:"text-center p-8",children:"Loading product listings..."}):t.jsx(H,{contentItems:c||[],onStatusChange:u,onEdit:p,onDelete:h})})]})]})})}export{R as default};
