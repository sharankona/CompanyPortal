import{r as y,w as S,u as k,x as w,y as i,j as t,e as F,D as q,a4 as B,B as K,P as L,a as M,b as P,c as O,a5 as Q,a6 as I,F as U,G as J,H as g,J as m,K as $,L as H,M as V}from"./index-BGb8UYbK.js";function G(){const[C,x]=y.useState("kanban"),[f,j]=y.useState(!1);document.title="Blog Content | Dashboard";const r=S(),{toast:a}=k(),{data:c,isLoading:l}=w({queryKey:["/api/content","blog"],queryFn:async()=>{const e=await fetch("/api/content?contentType=blog");if(!e.ok)throw new Error("Failed to fetch blog content");return e.json()}}),{data:d}=w({queryKey:["/api/workflows"],queryFn:async()=>{const e=await fetch("/api/workflows");if(!e.ok)throw new Error("Failed to fetch workflows");return e.json()}}),b=i({mutationFn:async e=>{const n=await fetch("/api/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,contentType:"blog"})});if(!n.ok){const s=await n.json();throw new Error(s.message||"Failed to create blog content")}return n.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["/api/content"]}),j(!1),a({title:"Blog Content Created",description:"Your blog content has been created successfully."})},onError:e=>{a({title:"Error",description:e.message,variant:"destructive"})}}),v=i({mutationFn:async({id:e,status:n,notes:s})=>{const o=await fetch(`/api/content/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,notes:s})});if(!o.ok){const N=await o.json();throw new Error(N.message||"Failed to update content")}return o.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["/api/content"]}),a({title:"Content Updated",description:"Content status has been updated successfully."})},onError:e=>{a({title:"Error",description:e.message,variant:"destructive"})}}),E=i({mutationFn:async({id:e,data:n})=>{const s=await fetch(`/api/content/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!s.ok){const o=await s.json();throw new Error(o.message||"Failed to edit content")}return s.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["/api/content"]}),a({title:"Content Updated",description:"Content has been updated successfully."})},onError:e=>{a({title:"Error",description:e.message,variant:"destructive"})}}),T=i({mutationFn:async e=>{const n=await fetch(`/api/content/${e}`,{method:"DELETE"});if(!n.ok){const s=await n.json();throw new Error(s.message||"Failed to delete content")}return n.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["/api/content"]}),a({title:"Content Deleted",description:"Content has been deleted successfully."})},onError:e=>{a({title:"Error",description:e.message,variant:"destructive"})}}),D=e=>{b.mutate(e)},u=(e,n,s)=>{v.mutate({id:e,status:n,notes:s})},h=(e,n)=>{E.mutate({id:e,data:n})},p=e=>{T.mutate(e)};return t.jsx(F,{title:"Blog Content",description:"Manage and track your blog content creation workflow",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("div",{className:"text-sm text-muted-foreground",children:"Manage your blog posts and articles"}),t.jsxs(q,{open:f,onOpenChange:j,children:[t.jsx(B,{asChild:!0,children:t.jsxs(K,{children:[t.jsx(L,{className:"mr-2 h-4 w-4"}),"Create Blog Post"]})}),t.jsxs(M,{className:"sm:max-w-[600px]",children:[t.jsxs(P,{children:[t.jsx(O,{children:"Create New Blog Post"}),t.jsx(Q,{children:"Fill in the details to create a new blog post."})]}),t.jsx(I,{onSubmit:D,workflows:d})]})]})]}),t.jsxs(U,{value:C,onValueChange:x,className:"w-full",children:[t.jsxs(J,{className:"grid w-full grid-cols-3",children:[t.jsx(g,{value:"kanban",children:"Kanban Board"}),t.jsx(g,{value:"list",children:"List View"}),t.jsx(g,{value:"calendar",children:"Calendar"})]}),t.jsx(m,{value:"kanban",className:"mt-6",children:l?t.jsx("div",{className:"text-center p-8",children:"Loading blog content..."}):t.jsx($,{contentItems:c||[],onStatusChange:u,onEdit:h,onDelete:p,workflows:d})}),t.jsx(m,{value:"list",className:"mt-6",children:l?t.jsx("div",{className:"text-center p-8",children:"Loading blog content..."}):t.jsx(H,{contentItems:c||[],onStatusChange:u,onEdit:h,onDelete:p,workflows:d})}),t.jsx(m,{value:"calendar",className:"mt-6",children:l?t.jsx("div",{className:"text-center p-8",children:"Loading blog content..."}):t.jsx(V,{contentItems:c||[],onStatusChange:u,onEdit:h,onDelete:p})})]})]})})}export{G as default};
