import{r as y,w as k,u as F,x as j,y as c,j as t,e as v,$ as N,D as T,a4 as D,B as S,P as E,a as q,b as K,c as L,a5 as M,a6 as O,F as P,G as Q,H as p,J as m,K as I,L as J,M as U}from"./index-BGb8UYbK.js";function B(){const[f,C]=y.useState("kanban"),[w,x]=y.useState(!1);document.title="Facebook Content | Dashboard";const s=k(),{toast:o}=F(),{data:i,isLoading:r}=j({queryKey:["/api/content","facebook"],queryFn:async()=>{const e=await fetch("/api/content?contentType=facebook");if(!e.ok)throw new Error("Failed to fetch Facebook content");return e.json()}}),{data:l}=j({queryKey:["/api/workflows"],queryFn:async()=>{const e=await fetch("/api/workflows");if(!e.ok)throw new Error("Failed to fetch workflows");return e.json()}}),g=c({mutationFn:async e=>{const n=await fetch("/api/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,contentType:"facebook"})});if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to create Facebook content")}return n.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/content"]}),x(!1),o({title:"Facebook Content Created",description:"Your Facebook content has been created successfully."})}}),d=c({mutationFn:async({id:e,status:n,notes:a})=>{const b=await fetch(`/api/content/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,notes:a})});if(!b.ok)throw new Error("Failed to update content");return b.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/content"]}),o({title:"Content Updated",description:"Content status has been updated successfully."})}}),u=c({mutationFn:async({id:e,data:n})=>{const a=await fetch(`/api/content/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok)throw new Error("Failed to edit content");return a.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/content"]}),o({title:"Content Updated",description:"Content has been updated successfully."})}}),h=c({mutationFn:async e=>{const n=await fetch(`/api/content/${e}`,{method:"DELETE"});if(!n.ok)throw new Error("Failed to delete content");return n.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/content"]}),o({title:"Content Deleted",description:"Content has been deleted successfully."})}});return t.jsx(v,{title:"Facebook Content",description:"Manage your Facebook posts and page content",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(N,{className:"h-6 w-6 text-black"}),t.jsx("div",{className:"text-sm text-muted-foreground",children:"Manage your Facebook posts and page content"})]}),t.jsxs(T,{open:w,onOpenChange:x,children:[t.jsx(D,{asChild:!0,children:t.jsxs(S,{children:[t.jsx(E,{className:"mr-2 h-4 w-4"}),"Create Facebook Post"]})}),t.jsxs(q,{className:"sm:max-w-[600px]",children:[t.jsxs(K,{children:[t.jsx(L,{children:"Create New Facebook Content"}),t.jsx(M,{children:"Fill in the details to create a new Facebook post."})]}),t.jsx(O,{onSubmit:e=>g.mutate(e),workflows:l})]})]})]}),t.jsxs(P,{value:f,onValueChange:C,className:"w-full",children:[t.jsxs(Q,{className:"grid w-full grid-cols-3",children:[t.jsx(p,{value:"kanban",children:"Kanban Board"}),t.jsx(p,{value:"list",children:"List View"}),t.jsx(p,{value:"calendar",children:"Calendar"})]}),t.jsx(m,{value:"kanban",className:"mt-6",children:r?t.jsx("div",{className:"text-center p-8",children:"Loading Facebook content..."}):t.jsx(I,{contentItems:i||[],onStatusChange:(e,n,a)=>d.mutate({id:e,status:n,notes:a}),onEdit:(e,n)=>u.mutate({id:e,data:n}),onDelete:e=>h.mutate(e),workflows:l})}),t.jsx(m,{value:"list",className:"mt-6",children:r?t.jsx("div",{className:"text-center p-8",children:"Loading Facebook content..."}):t.jsx(J,{contentItems:i||[],onStatusChange:(e,n,a)=>d.mutate({id:e,status:n,notes:a}),onEdit:(e,n)=>u.mutate({id:e,data:n}),onDelete:e=>h.mutate(e),workflows:l})}),t.jsx(m,{value:"calendar",className:"mt-6",children:r?t.jsx("div",{className:"text-center p-8",children:"Loading Facebook content..."}):t.jsx(U,{contentItems:i||[],onStatusChange:(e,n,a)=>d.mutate({id:e,status:n,notes:a}),onEdit:(e,n)=>u.mutate({id:e,data:n}),onDelete:e=>h.mutate(e)})})]})]})})}export{B as default};
