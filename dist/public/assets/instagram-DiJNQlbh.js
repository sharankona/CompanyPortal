import{r as x,w as E,u as S,x as y,y as i,j as e,e as F,Y as k,D as q,a4 as K,B as L,P as M,a as O,b as P,c as Q,a5 as U,a6 as J,F as B,G as $,H as p,J as g,K as H,L as V,M as Y}from"./index-BGb8UYbK.js";function G(){const[C,w]=x.useState("kanban"),[f,j]=x.useState(!1);document.title="Instagram Content | Dashboard";const r=E(),{toast:s}=S(),{data:c,isLoading:l}=y({queryKey:["/api/content","instagram"],queryFn:async()=>{const t=await fetch("/api/content?contentType=instagram");if(!t.ok)throw new Error("Failed to fetch Instagram content");return t.json()}}),{data:d}=y({queryKey:["/api/workflows"],queryFn:async()=>{const t=await fetch("/api/workflows");if(!t.ok)throw new Error("Failed to fetch workflows");return t.json()}}),b=i({mutationFn:async t=>{const n=await fetch("/api/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,contentType:"instagram"})});if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to create Instagram content")}return n.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["/api/content"]}),j(!1),s({title:"Instagram Content Created",description:"Your Instagram content has been created successfully."})},onError:t=>{s({title:"Error",description:t.message,variant:"destructive"})}}),v=i({mutationFn:async({id:t,status:n,notes:a})=>{const o=await fetch(`/api/content/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,notes:a})});if(!o.ok){const D=await o.json();throw new Error(D.message||"Failed to update content")}return o.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["/api/content"]}),s({title:"Content Updated",description:"Content status has been updated successfully."})}}),I=i({mutationFn:async({id:t,data:n})=>{const a=await fetch(`/api/content/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok){const o=await a.json();throw new Error(o.message||"Failed to edit content")}return a.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["/api/content"]}),s({title:"Content Updated",description:"Content has been updated successfully."})}}),N=i({mutationFn:async t=>{const n=await fetch(`/api/content/${t}`,{method:"DELETE"});if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to delete content")}return n.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["/api/content"]}),s({title:"Content Deleted",description:"Content has been deleted successfully."})}}),T=t=>{b.mutate(t)},u=(t,n,a)=>{v.mutate({id:t,status:n,notes:a})},m=(t,n)=>{I.mutate({id:t,data:n})},h=t=>{N.mutate(t)};return e.jsx(F,{title:"Instagram Content",description:"Manage your Instagram posts, stories, and content",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{className:"h-6 w-6 text-black"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Manage your Instagram posts and visual content"})]}),e.jsxs(q,{open:f,onOpenChange:j,children:[e.jsx(K,{asChild:!0,children:e.jsxs(L,{children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Create Instagram Post"]})}),e.jsxs(O,{className:"sm:max-w-[600px]",children:[e.jsxs(P,{children:[e.jsx(Q,{children:"Create New Instagram Content"}),e.jsx(U,{children:"Fill in the details to create a new Instagram post."})]}),e.jsx(J,{onSubmit:T,workflows:d})]})]})]}),e.jsxs(B,{value:C,onValueChange:w,className:"w-full",children:[e.jsxs($,{className:"grid w-full grid-cols-3",children:[e.jsx(p,{value:"kanban",children:"Kanban Board"}),e.jsx(p,{value:"list",children:"List View"}),e.jsx(p,{value:"calendar",children:"Calendar"})]}),e.jsx(g,{value:"kanban",className:"mt-6",children:l?e.jsx("div",{className:"text-center p-8",children:"Loading Instagram content..."}):e.jsx(H,{contentItems:c||[],onStatusChange:u,onEdit:m,onDelete:h,workflows:d})}),e.jsx(g,{value:"list",className:"mt-6",children:l?e.jsx("div",{className:"text-center p-8",children:"Loading Instagram content..."}):e.jsx(V,{contentItems:c||[],onStatusChange:u,onEdit:m,onDelete:h,workflows:d})}),e.jsx(g,{value:"calendar",className:"mt-6",children:l?e.jsx("div",{className:"text-center p-8",children:"Loading Instagram content..."}):e.jsx(Y,{contentItems:c||[],onStatusChange:u,onEdit:m,onDelete:h})})]})]})})}export{G as default};
