import{f as T,r as h,w as W,u as J,x as L,y as g,j as e,e as M,C as H,z as R,A as z,E as G,S as f,o as v,p as w,q as b,s as p,F as X,G as Y,H as C,J as N,K as Z,L as _,M as ee}from"./index-BGb8UYbK.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=T("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=T("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=T("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function le(){var F;const[q,V]=h.useState("list"),[i,K]=h.useState("all"),[r,O]=h.useState("updatedAt"),[S,U]=h.useState("desc");document.title="All Content | Dashboard";const m=W(),{toast:c}=J(),{data:d,isLoading:u,error:k}=L({queryKey:["/api/content","all"],queryFn:async()=>{console.log("Fetching all content...");try{const t=await fetch("/api/content");if(t.ok){const n=await t.json();return console.log("Fetched content data:",n),n}console.log("Main endpoint failed, trying individual content types...");const a=["blog","instagram","linkedin","youtube","facebook","twitter","product"],s=[];for(const n of a)try{const l=await fetch(`/api/content?contentType=${n}`);if(l.ok){const D=await l.json();Array.isArray(D)&&s.push(...D)}}catch(l){console.warn(`Failed to fetch ${n} content:`,l)}return console.log("Fetched combined content data:",s),s}catch(t){throw console.error("Error fetching content:",t),t}}}),{data:E}=L({queryKey:["/api/workflows"],queryFn:async()=>{const t=await fetch("/api/workflows");if(!t.ok)throw new Error("Failed to fetch workflows");return t.json()}}),I=g({mutationFn:async({id:t,status:a,notes:s})=>{const n=await fetch(`/api/content/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a,notes:s})});if(!n.ok){const l=await n.json();throw new Error(l.message||"Failed to update content")}return n.json()},onSuccess:()=>{m.invalidateQueries({queryKey:["/api/content"]}),c({title:"Content Updated",description:"Content status has been updated successfully."})},onError:t=>{c({title:"Error",description:t.message,variant:"destructive"})}}),B=g({mutationFn:async({id:t,data:a})=>{const s=await fetch(`/api/content/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){const n=await s.json();throw new Error(n.message||"Failed to edit content")}return s.json()},onSuccess:()=>{m.invalidateQueries({queryKey:["/api/content"]}),c({title:"Content Updated",description:"Content has been updated successfully."})},onError:t=>{c({title:"Error",description:t.message,variant:"destructive"})}}),P=g({mutationFn:async t=>{const a=await fetch(`/api/content/${t}`,{method:"DELETE"});if(!a.ok){const s=await a.json();throw new Error(s.message||"Failed to delete content")}return a.json()},onSuccess:()=>{m.invalidateQueries({queryKey:["/api/content"]}),c({title:"Content Deleted",description:"Content has been deleted successfully."})},onError:t=>{c({title:"Error",description:t.message,variant:"destructive"})}}),x=(t,a,s)=>{I.mutate({id:t,status:a,notes:s})},j=(t,a)=>{B.mutate({id:t,data:a})},y=t=>{P.mutate(t)},Q=()=>{if(!d)return[];let t=d;return i!=="all"&&(t=t.filter(a=>a.contentType===i)),t.sort((a,s)=>{let n=a[r],l=s[r];return(r==="createdAt"||r==="updatedAt"||r==="deadline")&&(n=new Date(n||0).getTime(),l=new Date(l||0).getTime()),typeof n=="string"&&(n=n.toLowerCase(),l=l.toLowerCase()),S==="asc"?n>l?1:-1:n<l?1:-1}),t},A=[{value:"all",label:"All Content Types"},{value:"blog",label:"Blog Posts"},{value:"instagram",label:"Instagram"},{value:"linkedin",label:"LinkedIn"},{value:"youtube",label:"YouTube"},{value:"facebook",label:"Facebook"},{value:"twitter",label:"X (Twitter)"},{value:"product",label:"Product Listings"}],$=[{value:"updatedAt",label:"Last Updated"},{value:"createdAt",label:"Created Date"},{value:"title",label:"Title"},{value:"status",label:"Status"},{value:"contentType",label:"Content Type"},{value:"deadline",label:"Deadline"}],o=Q();return k?e.jsx(M,{title:"All Content",description:"View and manage all content across platforms",children:e.jsxs("div",{className:"text-center p-8 text-red-600",children:["Error loading content: ",k.message]})}):e.jsx(M,{title:"All Content",description:"View and manage all content across platforms",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(H,{children:[e.jsx(R,{children:e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5"}),"Filters & Sorting"]})}),e.jsxs(G,{children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Content Type"}),e.jsxs(f,{value:i,onValueChange:K,children:[e.jsx(v,{className:"w-[200px]",children:e.jsx(w,{placeholder:"Select content type"})}),e.jsx(b,{children:A.map(t=>e.jsx(p,{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Sort By"}),e.jsxs(f,{value:r,onValueChange:O,children:[e.jsx(v,{className:"w-[200px]",children:e.jsx(w,{placeholder:"Sort by"})}),e.jsx(b,{children:$.map(t=>e.jsx(p,{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Sort Order"}),e.jsxs(f,{value:S,onValueChange:U,children:[e.jsx(v,{className:"w-[150px]",children:e.jsx(w,{placeholder:"Order"})}),e.jsxs(b,{children:[e.jsx(p,{value:"desc",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Descending"]})}),e.jsx(p,{value:"asc",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"Ascending"]})})]})]})]})]}),e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:["Showing ",o.length," ",o.length===1?"item":"items",i!=="all"&&e.jsxs("span",{children:[" for ",(F=A.find(t=>t.value===i))==null?void 0:F.label]}),u&&e.jsx("span",{children:" (Loading...)"}),d&&e.jsxs("span",{children:[" (Total available: ",d.length,")"]})]})]})]}),e.jsxs(X,{value:q,onValueChange:V,className:"w-full",children:[e.jsxs(Y,{className:"grid w-full grid-cols-3",children:[e.jsx(C,{value:"kanban",children:"Kanban Board"}),e.jsx(C,{value:"list",children:"List View"}),e.jsx(C,{value:"calendar",children:"Calendar"})]}),e.jsx(N,{value:"kanban",className:"mt-6",children:u?e.jsx("div",{className:"text-center p-8",children:"Loading content..."}):o.length===0?e.jsxs("div",{className:"text-center p-8 text-gray-500",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No content found"}),e.jsx("p",{children:"No content entries are available. Create some content in the individual content pages to see them here."})]}):e.jsx(Z,{contentItems:o,onStatusChange:x,onEdit:j,onDelete:y,workflows:E})}),e.jsx(N,{value:"list",className:"mt-6",children:u?e.jsx("div",{className:"text-center p-8",children:"Loading content..."}):o.length===0?e.jsxs("div",{className:"text-center p-8 text-gray-500",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No content found"}),e.jsx("p",{children:"No content entries are available. Create some content in the individual content pages to see them here."})]}):e.jsx(_,{contentItems:o,onStatusChange:x,onEdit:j,onDelete:y,workflows:E})}),e.jsx(N,{value:"calendar",className:"mt-6",children:u?e.jsx("div",{className:"text-center p-8",children:"Loading content..."}):o.length===0?e.jsxs("div",{className:"text-center p-8 text-gray-500",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No content found"}),e.jsx("p",{children:"No content entries are available. Create some content in the individual content pages to see them here."})]}):e.jsx(ee,{contentItems:o,onStatusChange:x,onEdit:j,onDelete:y})})]})]})})}export{le as default};
