import{r as d,w as J,u as $,x as k,y as m,j as e,e as H,C as R,z as W,S as g,o as C,p as y,q as b,s as p,D as X,a4 as z,B as G,P as Y,a as _,b as Z,c as ee,a5 as te,a6 as se,A as ae,E as ne,F as S,G as T,H as le,J as re,K as ie,a0 as oe}from"./index-B7iLIyza.js";import{A as ce,a as de}from"./arrow-up-narrow-wide-8S7c1kUE.js";function xe(){var F;const[A,O]=d.useState("kanban"),[L,N]=d.useState(!1),[o,q]=d.useState("all"),[i,K]=d.useState("updatedAt"),[D,I]=d.useState("desc");document.title="X (Twitter) Content | Dashboard";const u=J(),{toast:l}=$(),{data:h,isLoading:x}=k({queryKey:["/api/content","twitter"],queryFn:async()=>{const t=await fetch("/api/content?contentType=twitter");if(!t.ok)throw new Error("Failed to fetch Twitter content");return t.json()}}),{data:j}=k({queryKey:["/api/workflows"],queryFn:async()=>{const t=await fetch("/api/workflows");if(!t.ok)throw new Error("Failed to fetch workflows");return t.json()}}),P=m({mutationFn:async t=>{const s=await fetch("/api/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,contentType:"twitter"})});if(!s.ok){const a=await s.json();throw new Error(a.message||"Failed to create Twitter content")}return s.json()},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/content"]}),N(!1),l({title:"Twitter Content Created",description:"Your Twitter content has been created successfully."})},onError:t=>{l({title:"Error",description:t.message,variant:"destructive"})}}),V=m({mutationFn:async({id:t,status:s,notes:a})=>{const n=await fetch(`/api/content/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,notes:a})});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to update content")}return n.json()},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/content"]}),l({title:"Content Updated",description:"Content status has been updated successfully."})},onError:t=>{l({title:"Error",description:t.message,variant:"destructive"})}}),U=m({mutationFn:async({id:t,data:s})=>{const a=await fetch(`/api/content/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){const n=await a.json();throw new Error(n.message||"Failed to edit content")}return a.json()},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/content"]}),l({title:"Content Updated",description:"Content has been updated successfully."})},onError:t=>{l({title:"Error",description:t.message,variant:"destructive"})}}),B=m({mutationFn:async t=>{const s=await fetch(`/api/content/${t}`,{method:"DELETE"});if(!s.ok){const a=await s.json();throw new Error(a.message||"Failed to delete content")}return s.json()},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/content"]}),l({title:"Content Deleted",description:"Content has been deleted successfully."})},onError:t=>{l({title:"Error",description:t.message,variant:"destructive"})}}),M=t=>{P.mutate(t)},w=(t,s,a)=>{V.mutate({id:t,status:s,notes:a})},f=(t,s)=>{U.mutate({id:t,data:s})},v=t=>{B.mutate(t)},c=()=>{if(!h)return[];let t=h;return o!=="all"&&(t=t.filter(s=>s.status===o)),t.sort((s,a)=>{let n=s[i],r=a[i];return(i==="createdAt"||i==="updatedAt"||i==="deadline")&&(n=new Date(n||0).getTime(),r=new Date(r||0).getTime()),typeof n=="string"&&(n=n.toLowerCase(),r=r.toLowerCase()),D==="asc"?n>r?1:-1:n<r?1:-1}),t},E=[{value:"all",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"in_progress",label:"In Progress"},{value:"review",label:"Review"},{value:"approved",label:"Approved"},{value:"published",label:"Published"}],Q=[{value:"updatedAt",label:"Last Updated"},{value:"createdAt",label:"Created Date"},{value:"title",label:"Title"},{value:"status",label:"Status"},{value:"deadline",label:"Deadline"}];return e.jsx(H,{title:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"h-6 w-6 text-black"}),e.jsx("span",{children:"X (Twitter) Content"})]}),description:"Manage your tweets and Twitter content",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(R,{children:e.jsxs(W,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-end justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(g,{value:o,onValueChange:q,children:[e.jsx(C,{className:"w-[200px]",children:e.jsx(y,{placeholder:"Select status"})}),e.jsx(b,{children:E.map(t=>e.jsx(p,{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Sort By"}),e.jsxs(g,{value:i,onValueChange:K,children:[e.jsx(C,{className:"w-[200px]",children:e.jsx(y,{placeholder:"Sort by"})}),e.jsx(b,{children:Q.map(t=>e.jsx(p,{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Sort Order"}),e.jsxs(g,{value:D,onValueChange:I,children:[e.jsx(C,{className:"w-[150px]",children:e.jsx(y,{placeholder:"Order"})}),e.jsxs(b,{children:[e.jsx(p,{value:"desc",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4"}),"Descending"]})}),e.jsx(p,{value:"asc",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),"Ascending"]})})]})]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Â "}),e.jsxs(X,{open:L,onOpenChange:N,children:[e.jsx(z,{asChild:!0,children:e.jsxs(G,{children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Create Tweet"]})}),e.jsxs(_,{className:"sm:max-w-[600px]",children:[e.jsxs(Z,{children:[e.jsx(ee,{children:"Create New Tweet"}),e.jsx(te,{children:"Fill in the details to create a new tweet."})]}),e.jsx(se,{onSubmit:M,workflows:j,defaultContentType:"twitter"})]})]})]})]}),e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:["Showing ",c().length," ",c().length===1?"item":"items",o!=="all"&&e.jsxs("span",{children:[" with status ",(F=E.find(t=>t.value===o))==null?void 0:F.label]}),x&&e.jsx("span",{children:" (Loading...)"}),h&&e.jsxs("span",{children:[" (Total available: ",h.length,")"]})]})]})}),e.jsxs(ae,{value:A,onValueChange:O,className:"w-full",children:[e.jsxs(ne,{className:"grid w-full grid-cols-3",children:[e.jsx(S,{value:"kanban",children:"Kanban Board"}),e.jsx(S,{value:"list",children:"List View"}),e.jsx(S,{value:"calendar",children:"Calendar"})]}),e.jsx(T,{value:"kanban",className:"mt-6",children:x?e.jsx("div",{className:"text-center p-8",children:"Loading Twitter content..."}):e.jsx(le,{contentItems:c(),onStatusChange:w,onEdit:f,onDelete:v,workflows:j})}),e.jsx(T,{value:"list",className:"mt-6",children:x?e.jsx("div",{className:"text-center p-8",children:"Loading Twitter content..."}):e.jsx(re,{contentItems:c(),onStatusChange:w,onEdit:f,onDelete:v,workflows:j})}),e.jsx(T,{value:"calendar",className:"mt-6",children:x?e.jsx("div",{className:"text-center p-8",children:"Loading Twitter content..."}):e.jsx(ie,{contentItems:c(),onStatusChange:w,onEdit:f,onDelete:v})})]})]})})}export{xe as default};
